<!DOCTYPE html>

<html>
    <head>
        <title>Bad cookie clicker game</title>
        <meta charset="UTF-8">
    </head>

    <body>
        
        <p1>Bad cookie clicker where you can increment a number! Multiplayer only!</p1>
        
        <div class="main_cookie">
            <img src="./Cookie-Monster-Cookies.jpg" onclick="requestToServer()" style="width:400px;height:300px;">

            <br>
            <p1 id="currentclicks" style="font-size:500%;">??</p1>
            <br>
            <button id="fallback2" class="fallback">Click this text if image doesn't load</button>
        </div>

        <br>

    </body>
    <script>
        
        function requestToServer() {
            var xhr = new XMLHttpRequest();
            
            xhr.onreadystatechange = function () {
            if (xhr.readyState === 4) {
                document.getElementById("currentclicks").innerHTML = xhr.response;
            }
            }
            
            
            xhr.open('get', "https://mongodbteszt-production.up.railway.app/clicks", true);
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
            xhr.send();
        }

        var button = document.getElementById("fallback2");
        button.addEventListener("click", function(e) {
        // e is the event object
        // e.target is the button element
        // do stuff with them



        requestToServer();
        });

    </script>
    <style>
        img:hover {
            cursor: pointer;

        }
        .main_cookie {
            
            text-align:center;
            border: 5px solid;
            margin: auto;
            width: 420px;
            height: 416px;
            padding: 20px;
        }
        button.fallback {
            background:none;
            border:none; 
            
        }

    </style>
</html>